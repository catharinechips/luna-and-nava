<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Spanish vocabulary flashcard app with AI-powered card generation">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <title>Cata Cards - Spanish Vocabulary</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Amatic+SC:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body { margin: 0; padding: 0; overflow-x: hidden; }
    .card-flip-container { perspective: 1000px; }
    .card-flip-inner {
      position: relative; width: 100%; height: 100%;
      transition: transform 0.6s; transform-style: preserve-3d;
    }
    .card-flip-inner.flipped { transform: rotateY(180deg); }
    .card-face {
      position: absolute; width: 100%; height: 100%;
      backface-visibility: hidden; -webkit-backface-visibility: hidden;
    }
    .card-face-back { transform: rotateY(180deg); }
  </style>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">

    const { useState, useEffect } = React;

    // Icon Components
    const Plus = (props) => (
      <svg {...props} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <line x1="12" y1="5" x2="12" y2="19"></line>
        <line x1="5" y1="12" x2="19" y2="12"></line>
      </svg>
    );

    const Upload = (props) => (
      <svg {...props} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
        <polyline points="17 8 12 3 7 8"></polyline>
        <line x1="12" y1="3" x2="12" y2="15"></line>
      </svg>
    );

    const BookOpen = (props) => (
      <svg {...props} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
        <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
      </svg>
    );

    const Brain = (props) => (
      <svg {...props} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"></path>
        <path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z"></path>
      </svg>
    );

    const Trash2 = (props) => (
      <svg {...props} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <polyline points="3 6 5 6 21 6"></polyline>
        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
        <line x1="10" y1="11" x2="10" y2="17"></line>
        <line x1="14" y1="11" x2="14" y2="17"></line>
      </svg>
    );

    const Check = (props) => (
      <svg {...props} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <polyline points="20 6 9 17 4 12"></polyline>
      </svg>
    );

    const X = (props) => (
      <svg {...props} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg>
    );

    const RotateCcw = (props) => (
      <svg {...props} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <polyline points="1 4 1 10 7 10"></polyline>
        <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path>
      </svg>
    );

    const Search = (props) => (
      <svg {...props} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <circle cx="11" cy="11" r="8"></circle>
        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
      </svg>
    );


// Add Google Font import and CSS for card flip animation

const CataCards = () => {
  const [cards, setCards] = useState([]);
  const [view, setView] = useState('dashboard'); // dashboard, my-deck, quiz-mode, add-card, study, quiz-session
  const [inputWord, setInputWord] = useState('');
  const [loading, setLoading] = useState(false);
  const [filter, setFilter] = useState('all'); // all, learning, mastered
  const [searchQuery, setSearchQuery] = useState('');
  const [currentCardIndex, setCurrentCardIndex] = useState(0);
  const [isFlipped, setIsFlipped] = useState(false);
  const [showTranslation, setShowTranslation] = useState(false);
  const [quizMode, setQuizMode] = useState(null); // 'type' or 'multiple'
  const [quizAnswer, setQuizAnswer] = useState('');
  const [quizOptions, setQuizOptions] = useState([]);
  const [quizFeedback, setQuizFeedback] = useState(null);
  const [studyCategoryFilter, setStudyCategoryFilter] = useState('all');

  // Northern lights color palette
  const colors = {
    deepPurple: '#2e2645',
    purple: '#4a3456',
    darkTeal: '#1a4d4d',
    teal: '#2d7b7b',
    aurora: '#5dd9c1',
    grayBlue: '#7a8d9a',
    lightGray: '#d4dce3',
    paleGray: '#f0f4f7'
  };

  // Load cards from localStorage
  useEffect(() => {
    const saved = localStorage.getItem('cataCards');
    if (saved) {
      setCards(JSON.parse(saved));
    }
  }, []);

  // Save cards to localStorage
  useEffect(() => {
    if (cards.length > 0) {
      localStorage.setItem('cataCards', JSON.stringify(cards));
    }
  }, [cards]);

  const generateCardData = async (spanishWord) => {
    setLoading(true);
    try {
      const response = await fetch('https://api.anthropic.com/v1/messages', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          model: 'claude-sonnet-4-20250514',
          max_tokens: 2000,
          messages: [{
            role: 'user',
            content: `Analyze this Spanish word or phrase: "${spanishWord}"

Please respond ONLY with valid JSON in this exact format (no markdown, no backticks, no preamble):
{
  "isValid": true/false,
  "spanish": "the word or phrase",
  "english": "translation",
  "partOfSpeech": "verb/noun/adjective/phrase/expression/adverb/etc",
  "gender": "masculine/feminine/neutral/n/a",
  "conjugations": {
    "preterite": {
      "yo": "conjugated form",
      "tu": "conjugated form",
      "el": "conjugated form",
      "nosotros": "conjugated form",
      "vosotros": "conjugated form",
      "ellos": "conjugated form"
    },
    "present": {
      "yo": "conjugated form",
      "tu": "conjugated form",
      "el": "conjugated form",
      "nosotros": "conjugated form",
      "vosotros": "conjugated form",
      "ellos": "conjugated form"
    },
    "imperfect": {
      "yo": "conjugated form",
      "tu": "conjugated form",
      "el": "conjugated form",
      "nosotros": "conjugated form",
      "vosotros": "conjugated form",
      "ellos": "conjugated form"
    },
    "future": {
      "yo": "conjugated form",
      "tu": "conjugated form",
      "el": "conjugated form",
      "nosotros": "conjugated form",
      "vosotros": "conjugated form",
      "ellos": "conjugated form"
    }
  },
  "exampleSpanish": "sentence using the word or phrase",
  "exampleEnglish": "English translation of example"
}

IMPORTANT RULES:
- This can be a single word OR a multi-word phrase/expression (like "sin embargo", "de este modo", "por supuesto", etc.)
- If this is a single-word VERB: Fill in ALL 24 conjugations (6 persons √ó 4 tenses). Every single field must have the proper conjugated form. Do not leave any blank or use placeholders.
- If this is NOT a single-word verb (phrase, noun, adjective, adverb, expression, etc.): Set conjugations to null
- If the word/phrase is not valid Spanish, set isValid to false`
          }]
        })
      });

      const data = await response.json();
      const content = data.content.find(c => c.type === 'text')?.text || '';
      
      const cleanContent = content.replace(/```json\n?/g, '').replace(/```\n?/g, '').trim();
      const parsed = JSON.parse(cleanContent);

      if (!parsed.isValid) {
        alert('This does not appear to be a valid Spanish word or phrase. Please try again.');
        setLoading(false);
        return null;
      }

      return {
        id: Date.now(),
        spanish: parsed.spanish,
        english: parsed.english,
        partOfSpeech: parsed.partOfSpeech,
        gender: parsed.gender,
        conjugations: parsed.conjugations,
        exampleSpanish: parsed.exampleSpanish,
        exampleEnglish: parsed.exampleEnglish,
        status: 'learning',
        reviewCount: 0,
        lastReviewed: null
      };
    } catch (error) {
      console.error('Error generating card:', error);
      alert('Error generating card data. Please try again.');
      setLoading(false);
      return null;
    }
  };

  const handleAddCard = async () => {
    if (!inputWord.trim()) return;
    
    const cardData = await generateCardData(inputWord.trim());
    if (cardData) {
      setCards([...cards, cardData]);
      setInputWord('');
      setView('my-deck');
    }
    setLoading(false);
  };

  const handleCSVUpload = async (e) => {
    const file = e.target.files[0];
    if (!file) return;

    const text = await file.text();
    const lines = text.split('\n').map(line => line.trim()).filter(line => line);
    
    setLoading(true);
    const newCards = [];
    
    for (const wordOrPhrase of lines) {
      const cardData = await generateCardData(wordOrPhrase);
      if (cardData) {
        newCards.push(cardData);
      }
      await new Promise(resolve => setTimeout(resolve, 1000));
    }
    
    setCards([...cards, ...newCards]);
    setLoading(false);
  };

  const deleteCard = (id) => {
    setCards(cards.filter(card => card.id !== id));
  };

  const updateCardStatus = (id, status) => {
    setCards(cards.map(card => 
      card.id === id 
        ? { ...card, status, lastReviewed: new Date().toISOString(), reviewCount: card.reviewCount + 1 }
        : card
    ));
  };

  const getFilteredCards = () => {
    let filtered = cards;
    
    if (filter !== 'all') {
      filtered = filtered.filter(card => card.status === filter);
    }
    
    if (searchQuery.trim()) {
      filtered = filtered.filter(card => 
        card.spanish.toLowerCase().includes(searchQuery.toLowerCase()) ||
        card.english.toLowerCase().includes(searchQuery.toLowerCase())
      );
    }
    
    return filtered;
  };

  const pronounceWord = (text, event) => {
    if (event) event.stopPropagation();
    
    if ('speechSynthesis' in window) {
      window.speechSynthesis.cancel();
      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = 'es-ES';
      utterance.rate = 0.8;
      window.speechSynthesis.speak(utterance);
    } else {
      alert('Text-to-speech is not supported in your browser.');
    }
  };

  const startQuiz = () => {
    const filtered = getFilteredCards();
    if (filtered.length === 0) {
      alert('No cards available for quiz!');
      return;
    }
    setCurrentCardIndex(0);
    setQuizMode(Math.random() > 0.5 ? 'type' : 'multiple');
    setQuizAnswer('');
    setQuizFeedback(null);
    setShowTranslation(false);
    setView('quiz-session');
    
    if (Math.random() > 0.5) {
      generateMultipleChoiceOptions(filtered[0]);
    }
  };

  const generateMultipleChoiceOptions = (correctCard) => {
    const otherCards = cards.filter(c => c.id !== correctCard.id);
    const wrongOptions = otherCards
      .sort(() => Math.random() - 0.5)
      .slice(0, 3)
      .map(c => c.english);
    
    const allOptions = [...wrongOptions, correctCard.english].sort(() => Math.random() - 0.5);
    setQuizOptions(allOptions);
  };

  const checkAnswer = () => {
    const currentCard = getFilteredCards()[currentCardIndex];
    const isCorrect = quizAnswer.toLowerCase().trim() === currentCard.english.toLowerCase().trim();
    
    setQuizFeedback(isCorrect ? 'correct' : 'incorrect');
    
    setTimeout(() => {
      if (isCorrect && currentCard.status === 'learning') {
        updateCardStatus(currentCard.id, 'mastered');
      }
      
      const filtered = getFilteredCards();
      if (currentCardIndex < filtered.length - 1) {
        setCurrentCardIndex(currentCardIndex + 1);
        setQuizAnswer('');
        setQuizFeedback(null);
        setShowTranslation(false);
        const nextMode = Math.random() > 0.5 ? 'type' : 'multiple';
        setQuizMode(nextMode);
        if (nextMode === 'multiple') {
          generateMultipleChoiceOptions(filtered[currentCardIndex + 1]);
        }
      } else {
        alert('Quiz complete! Great job! üéâ');
        setView('dashboard');
      }
    }, 1500);
  };

  const stats = {
    total: cards.length,
    learning: cards.filter(c => c.status === 'learning').length,
    mastered: cards.filter(c => c.status === 'mastered').length
  };

  // Sidebar Component
  const Sidebar = () => (
    <div style={{ backgroundColor: colors.paleGray, borderRight: `1px solid ${colors.lightGray}` }} className="w-64 h-screen fixed left-0 top-0 flex flex-col">
      {/* Logo */}
      <div className="p-6 flex items-center gap-3">
        <div style={{ backgroundColor: colors.teal }} className="w-12 h-12 rounded-xl flex items-center justify-center text-white text-xl font-bold">
          C
        </div>
        <div style={{ fontFamily: "'Amatic SC', cursive" }} className="text-2xl font-bold">Cata Cards</div>
      </div>

      {/* Navigation */}
      <nav className="flex-1 px-4">
        <button
          onClick={() => setView('dashboard')}
          style={{
            backgroundColor: view === 'dashboard' ? `${colors.teal}20` : 'transparent',
            color: view === 'dashboard' ? colors.teal : colors.grayBlue
          }}
          className="w-full flex items-center gap-3 px-4 py-3 rounded-xl mb-2 hover:opacity-80 transition-colors"
        >
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
            <rect x="3" y="3" width="7" height="7"></rect>
            <rect x="14" y="3" width="7" height="7"></rect>
            <rect x="14" y="14" width="7" height="7"></rect>
            <rect x="3" y="14" width="7" height="7"></rect>
          </svg>
          Dashboard
        </button>

        <button
          onClick={() => setView('my-deck')}
          style={{
            backgroundColor: view === 'my-deck' ? `${colors.teal}20` : 'transparent',
            color: view === 'my-deck' ? colors.teal : colors.grayBlue
          }}
          className="w-full flex items-center gap-3 px-4 py-3 rounded-xl mb-2 hover:opacity-80 transition-colors"
        >
          <BookOpen className="w-5 h-5" />
          My Deck
        </button>

        <button
          onClick={() => setView('quiz-mode')}
          style={{
            backgroundColor: view === 'quiz-mode' ? `${colors.teal}20` : 'transparent',
            color: view === 'quiz-mode' ? colors.teal : colors.grayBlue
          }}
          className="w-full flex items-center gap-3 px-4 py-3 rounded-xl mb-2 hover:opacity-80 transition-colors"
        >
          <Brain className="w-5 h-5" />
          Quiz Mode
        </button>

        <button
          onClick={() => setView('add-card')}
          style={{
            backgroundColor: view === 'add-card' ? `${colors.teal}20` : 'transparent',
            color: view === 'add-card' ? colors.teal : colors.grayBlue
          }}
          className="w-full flex items-center gap-3 px-4 py-3 rounded-xl mb-2 hover:opacity-80 transition-colors"
        >
          <Plus className="w-5 h-5" />
          Add Card
        </button>
      </nav>

      {/* User Profile */}
      <div className="p-4 border-t" style={{ borderColor: colors.lightGray }}>
        <div className="flex items-center gap-3 mb-4">
          <div style={{ backgroundColor: colors.aurora }} className="w-10 h-10 rounded-full flex items-center justify-center">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke={colors.deepPurple} strokeWidth="2">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
              <circle cx="12" cy="7" r="4"></circle>
            </svg>
          </div>
          <div className="flex-1 overflow-hidden">
            <div style={{ color: colors.deepPurple }} className="font-medium text-sm">Catharine</div>
            <div style={{ color: colors.grayBlue }} className="text-xs truncate">cipollac007@gmail.com</div>
          </div>
        </div>
        <button style={{ color: colors.grayBlue }} className="flex items-center gap-2 text-sm hover:opacity-80">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
            <polyline points="16 17 21 12 16 7"></polyline>
            <line x1="21" y1="12" x2="9" y2="12"></line>
          </svg>
          Sign Out
        </button>
      </div>
    </div>
  );

  // Dashboard Page
  if (view === 'dashboard') {
    const recentCards = [...cards].sort((a, b) => b.id - a.id).slice(0, 3);
    
    return (
      <>
        
        <Sidebar />
        <div style={{ fontFamily: 'Helvetica, Arial, sans-serif', backgroundColor: colors.paleGray }} className="ml-64 min-h-screen p-8">
          <div className="max-w-6xl mx-auto">
            {/* Header */}
            <div className="mb-8">
              <h1 style={{ color: colors.deepPurple }} className="text-5xl font-bold mb-2">
                Welcome back, Catharine!
              </h1>
              <p style={{ color: colors.grayBlue }} className="text-lg">Ready to expand your vocabulary today?</p>
            </div>

            <div className="grid grid-cols-3 gap-6 mb-8">
              {/* Progress Card */}
              <div className="col-span-2 bg-white rounded-3xl p-8 shadow-sm">
                <div className="flex justify-between items-start mb-6">
                  <div>
                    <h2 style={{ color: colors.deepPurple }} className="text-3xl font-bold mb-1">Your Progress</h2>
                    <p style={{ color: colors.grayBlue }} className="text-sm">Keep up the momentum!</p>
                  </div>
                  <div style={{ backgroundColor: colors.paleGray, color: colors.teal }} className="px-4 py-2 rounded-xl flex items-center gap-2">
                    <BookOpen className="w-4 h-4" />
                    {stats.total} Cards Total
                  </div>
                </div>

                <div className="flex items-center gap-8">
                  {/* Circular Chart */}
                  <div className="relative w-40 h-40">
                    <svg className="transform -rotate-90" width="160" height="160">
                      <circle cx="80" cy="80" r="70" fill="none" stroke={colors.lightGray} strokeWidth="20"></circle>
                      <circle 
                        cx="80" 
                        cy="80" 
                        r="70" 
                        fill="none" 
                        stroke={colors.purple} 
                        strokeWidth="20"
                        strokeDasharray={`${stats.total > 0 ? (stats.learning / stats.total) * 440 : 0} 440`}
                      ></circle>
                    </svg>
                    <div className="absolute inset-0 flex flex-col items-center justify-center">
                      <div style={{ color: colors.deepPurple }} className="text-4xl font-bold">{stats.total}</div>
                      <div style={{ color: colors.grayBlue }} className="text-xs uppercase">Cards</div>
                    </div>
                  </div>

                  {/* Legend */}
                  <div className="flex-1 space-y-4">
                    <div style={{ backgroundColor: '#e8e4f3' }} className="flex items-center justify-between p-4 rounded-xl">
                      <div className="flex items-center gap-3">
                        <div className="w-3 h-3 rounded-full" style={{ backgroundColor: colors.purple }}></div>
                        <span style={{ color: colors.deepPurple }} className="font-medium">Learning</span>
                      </div>
                      <span style={{ color: colors.deepPurple }} className="font-bold text-xl">{stats.learning}</span>
                    </div>
                    <div style={{ backgroundColor: `${colors.teal}15` }} className="flex items-center justify-between p-4 rounded-xl">
                      <div className="flex items-center gap-3">
                        <div className="w-3 h-3 rounded-full" style={{ backgroundColor: colors.teal }}></div>
                        <span style={{ color: colors.deepPurple }} className="font-medium">Mastered</span>
                      </div>
                      <span style={{ color: colors.deepPurple }} className="font-bold text-xl">{stats.mastered}</span>
                    </div>
                  </div>
                </div>
              </div>

              {/* Action Cards */}
              <div className="space-y-4">
                <button
                  onClick={() => setView('add-card')}
                  style={{ backgroundColor: colors.purple }}
                  className="w-full p-6 rounded-3xl shadow-sm hover:opacity-90 transition-opacity text-left"
                >
                  <Plus className="w-8 h-8 text-white mb-3" />
                  <div className="text-xl font-bold text-white mb-1">Add New Card</div>
                  <div className="text-white text-sm opacity-90">Generate with AI or create manually</div>
                </button>

                <button
                  onClick={() => {
                    if (stats.learning > 0) {
                      setFilter('learning');
                      setView('my-deck');
                    }
                  }}
                  disabled={stats.learning === 0}
                  style={{ backgroundColor: colors.teal }}
                  className="w-full p-6 rounded-3xl shadow-sm hover:opacity-90 transition-opacity text-left disabled:opacity-50"
                >
                  <svg className="w-8 h-8 text-white mb-3" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                    <polygon points="5 3 19 12 5 21 5 3"></polygon>
                  </svg>
                  <div className="text-white">
                    Review {stats.learning} card{stats.learning !== 1 ? 's' : ''} due for study
                  </div>
                </button>
              </div>
            </div>

            {/* Recent Cards */}
            {recentCards.length > 0 && (
              <div>
                <h2 style={{ color: colors.deepPurple }} className="text-3xl font-bold mb-4">
                  Recent Cards
                </h2>
                <div className="grid grid-cols-3 gap-4">
                  {recentCards.map(card => (
                    <button
                      key={card.id}
                      onClick={() => {
                        setView('my-deck');
                      }}
                      className="bg-white p-6 rounded-2xl shadow-sm hover:shadow-md transition-shadow text-left"
                    >
                      <div style={{ color: colors.deepPurple }} className="text-3xl font-bold mb-2">
                        {card.spanish}
                      </div>
                      <div style={{ color: colors.grayBlue }} className="text-sm mb-3">{card.english}</div>
                      <span 
                        style={{ 
                          backgroundColor: card.status === 'mastered' ? `${colors.teal}20` : '#e8e4f3',
                          color: card.status === 'mastered' ? colors.teal : colors.purple
                        }} 
                        className="px-3 py-1 rounded-full text-xs font-medium uppercase"
                      >
                        {card.status}
                      </span>
                    </button>
                  ))}
                </div>
              </div>
            )}

            {cards.length === 0 && (
              <div className="text-center py-16">
                <BookOpen style={{ color: colors.lightGray }} className="w-20 h-20 mx-auto mb-4" />
                <h3 style={{ color: colors.deepPurple }} className="text-2xl font-bold mb-2">No cards yet!</h3>
                <p style={{ color: colors.grayBlue }} className="mb-6">Add your first Spanish word or phrase to get started.</p>
                <button
                  onClick={() => setView('add-card')}
                  style={{ backgroundColor: colors.teal }}
                  className="px-8 py-3 text-white rounded-xl hover:opacity-90 font-medium"
                >
                  Add Your First Card
                </button>
              </div>
            )}
          </div>
        </div>
      </>
    );
  }

  // My Deck Page
  if (view === 'my-deck') {
    const filtered = getFilteredCards();
    
    return (
      <>
        
        <Sidebar />
        <div style={{ fontFamily: 'Helvetica, Arial, sans-serif', backgroundColor: colors.paleGray }} className="ml-64 min-h-screen p-8">
          <div className="max-w-6xl mx-auto">
            {/* Header */}
            <div className="flex justify-between items-center mb-8">
              <div>
                <h1 style={{ color: colors.deepPurple }} className="text-5xl font-bold mb-2">
                  My Deck
                </h1>
                <p style={{ color: colors.grayBlue }} className="text-lg">Browse, study, and manage your flashcards collection.</p>
              </div>
              <button
                onClick={() => setView('add-card')}
                style={{ backgroundColor: colors.teal, boxShadow: '0 2px 4px rgba(0,0,0,0.1)' }}
                className="px-6 py-3 text-white rounded-xl hover:opacity-90 font-medium"
              >
                Add New Card
              </button>
            </div>

            {/* Search and Filters */}
            <div className="flex gap-4 mb-6">
              <div className="flex-1 relative">
                <Search style={{ color: colors.grayBlue }} className="absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5" />
                <input
                  type="text"
                  value={searchQuery}
                  onChange={(e) => setSearchQuery(e.target.value)}
                  placeholder="Search words..."
                  style={{ borderColor: colors.lightGray }}
                  className="w-full pl-12 pr-4 py-3 border-2 rounded-xl focus:outline-none bg-white"
                  onFocus={(e) => e.target.style.borderColor = colors.teal}
                  onBlur={(e) => e.target.style.borderColor = colors.lightGray}
                />
              </div>
              <div className="flex gap-2">
                <button
                  onClick={() => setFilter('all')}
                  style={{
                    backgroundColor: filter === 'all' ? colors.teal : 'white',
                    color: filter === 'all' ? 'white' : colors.grayBlue,
                    boxShadow: '0 2px 4px rgba(0,0,0,0.1)'
                  }}
                  className="px-6 py-3 rounded-xl font-medium hover:opacity-90"
                >
                  All
                </button>
                <button
                  onClick={() => setFilter('learning')}
                  style={{
                    backgroundColor: filter === 'learning' ? colors.teal : 'white',
                    color: filter === 'learning' ? 'white' : colors.grayBlue,
                    boxShadow: '0 2px 4px rgba(0,0,0,0.1)'
                  }}
                  className="px-6 py-3 rounded-xl font-medium hover:opacity-90"
                >
                  Learning
                </button>
                <button
                  onClick={() => setFilter('mastered')}
                  style={{
                    backgroundColor: filter === 'mastered' ? colors.teal : 'white',
                    color: filter === 'mastered' ? 'white' : colors.grayBlue,
                    boxShadow: '0 2px 4px rgba(0,0,0,0.1)'
                  }}
                  className="px-6 py-3 rounded-xl font-medium hover:opacity-90"
                >
                  Mastered
                </button>
              </div>
            </div>

            {/* Cards Grid */}
            {filtered.length > 0 ? (
              <div className="grid grid-cols-1 gap-4">
                {filtered.map(card => (
                  <div key={card.id} className="bg-white rounded-2xl p-6 shadow-sm hover:shadow-md transition-shadow">
                    <div className="flex items-start justify-between">
                      <div className="flex-1">
                        <div className="flex items-center gap-4 mb-2">
                          <div style={{ color: colors.grayBlue }} className="text-xs uppercase tracking-wider">Spanish</div>
                        </div>
                        <div className="flex items-center gap-4 mb-3">
                          <h3 style={{ color: colors.deepPurple }} className="text-4xl font-bold">
                            {card.spanish}
                          </h3>
                          <button 
                            onClick={(e) => pronounceWord(card.spanish, e)}
                            style={{ backgroundColor: colors.paleGray }}
                            className="w-10 h-10 rounded-full flex items-center justify-center hover:opacity-80 transition-opacity"
                          >
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke={colors.teal} strokeWidth="2">
                              <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                              <path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>
                            </svg>
                          </button>
                          <button
                            onClick={() => {
                              const cardIndex = cards.findIndex(c => c.id === card.id);
                              setCurrentCardIndex(cardIndex);
                              setIsFlipped(false);
                              setStudyCategoryFilter('all');
                              setView('study');
                            }}
                            style={{ backgroundColor: colors.paleGray, color: colors.teal }}
                            className="ml-auto w-10 h-10 rounded-full flex items-center justify-center hover:opacity-80 transition-opacity"
                          >
                            <RotateCcw className="w-4 h-4" />
                          </button>
                        </div>
                        <p style={{ color: colors.grayBlue }} className="text-sm">{card.english}</p>
                      </div>
                      <button
                        onClick={() => deleteCard(card.id)}
                        className="p-2 hover:bg-red-50 rounded-lg transition-colors"
                      >
                        <Trash2 className="w-4 h-4 text-red-600" />
                      </button>
                    </div>
                  </div>
                ))}
              </div>
            ) : (
              <div className="text-center py-16">
                <BookOpen style={{ color: colors.lightGray }} className="w-20 h-20 mx-auto mb-4" />
                <h3 style={{ color: colors.deepPurple }} className="text-2xl font-bold mb-2">No cards found</h3>
                <p style={{ color: colors.grayBlue }}>Try adjusting your search or filter.</p>
              </div>
            )}
          </div>
        </div>
      </>
    );
  }

  // Quiz Mode Page
  if (view === 'quiz-mode') {
    return (
      <>
        
        <Sidebar />
        <div style={{ fontFamily: 'Helvetica, Arial, sans-serif', backgroundColor: colors.paleGray }} className="ml-64 min-h-screen p-8 flex items-center justify-center">
          <div className="text-center max-w-2xl">
            <div style={{ backgroundColor: 'white' }} className="w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-8 shadow-sm">
              <RotateCcw style={{ color: colors.teal }} className="w-12 h-12" />
            </div>
            <h1 style={{ color: colors.deepPurple }} className="text-6xl font-bold mb-4">
              Ready to Review?
            </h1>
            <p style={{ color: colors.grayBlue }} className="text-lg mb-8">
              We have {stats.learning} card{stats.learning !== 1 ? 's' : ''} marked as "Learning". Let's review a random set of {Math.min(10, stats.learning)} to keep them fresh.
            </p>
            <button
              onClick={startQuiz}
              disabled={stats.learning === 0}
              style={{ backgroundColor: colors.teal, boxShadow: '0 4px 8px rgba(0,0,0,0.15)' }}
              className="px-12 py-4 text-white rounded-2xl hover:opacity-90 font-medium text-lg disabled:opacity-50 disabled:cursor-not-allowed"
            >
              Start Quiz Session
            </button>
          </div>
        </div>
      </>
    );
  }

  // Add Card Page
  if (view === 'add-card') {
    return (
      <>
        
        <Sidebar />
        <div style={{ fontFamily: 'Helvetica, Arial, sans-serif', backgroundColor: colors.paleGray }} className="ml-64 min-h-screen p-8">
          <div className="max-w-4xl mx-auto">
            <div className="mb-8">
              <h1 style={{ color: colors.deepPurple }} className="text-5xl font-bold mb-2">
                Add New Card
              </h1>
              <p style={{ color: colors.grayBlue }} className="text-lg">Type a word and let AI generate the details, or create your own.</p>
            </div>

            <div className="bg-white rounded-3xl p-8 shadow-sm">
              <label style={{ color: colors.grayBlue }} className="block text-sm font-medium mb-3">
                Enter a Spanish Word
              </label>
              <div className="flex gap-4">
                <input
                  type="text"
                  value={inputWord}
                  onChange={(e) => setInputWord(e.target.value)}
                  onKeyPress={(e) => e.key === 'Enter' && handleAddCard()}
                  placeholder="e.g. Biblioteca"
                  style={{ borderColor: colors.teal }}
                  className="flex-1 px-6 py-4 border-2 rounded-2xl focus:outline-none text-lg"
                  disabled={loading}
                />
                <button
                  onClick={handleAddCard}
                  disabled={loading || !inputWord.trim()}
                  style={{ backgroundColor: colors.purple, boxShadow: '0 2px 4px rgba(0,0,0,0.1)' }}
                  className="px-8 py-4 text-white rounded-2xl hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed font-medium flex items-center gap-2"
                >
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                    <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
                    <polyline points="7.5 4.21 12 6.81 16.5 4.21"></polyline>
                    <polyline points="7.5 19.79 7.5 14.6 3 12"></polyline>
                    <polyline points="21 12 16.5 14.6 16.5 19.79"></polyline>
                    <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
                    <line x1="12" y1="22.08" x2="12" y2="12"></line>
                  </svg>
                  {loading ? 'Generating...' : 'Generate'}
                </button>
              </div>

              <div className="mt-6 pt-6 border-t" style={{ borderColor: colors.lightGray }}>
                <label className="flex items-center justify-center px-6 py-4 border-2 border-dashed rounded-2xl cursor-pointer hover:opacity-80 transition-opacity" style={{ borderColor: colors.lightGray }}>
                  <Upload style={{ color: colors.grayBlue }} className="w-5 h-5 mr-2" />
                  <span style={{ color: colors.grayBlue }}>Or import CSV file</span>
                  <input
                    type="file"
                    accept=".csv"
                    onChange={handleCSVUpload}
                    className="hidden"
                    disabled={loading}
                  />
                </label>
              </div>
            </div>
          </div>
        </div>
      </>
    );
  }

  // Study Mode (Flashcard View)
  if (view === 'study') {
    const filtered = cards;
    const categories = ['all', ...new Set(filtered.map(card => card.partOfSpeech).filter(Boolean))];
    const categoryFiltered = studyCategoryFilter === 'all' 
      ? filtered 
      : filtered.filter(card => card.partOfSpeech === studyCategoryFilter);
    
    const currentCard = categoryFiltered[currentCardIndex];

    if (!currentCard) {
      return (
        <>
          
          <Sidebar />
          <div style={{ fontFamily: 'Helvetica, Arial, sans-serif', backgroundColor: colors.paleGray }} className="ml-64 min-h-screen p-8 flex items-center justify-center">
            <div className="text-center">
              <p style={{ color: colors.grayBlue }} className="mb-4">No cards available in this category!</p>
              <button
                onClick={() => {
                  setStudyCategoryFilter('all');
                  setView('my-deck');
                }}
                style={{ backgroundColor: colors.teal }}
                className="px-6 py-3 text-white rounded-xl hover:opacity-90"
              >
                Back to My Deck
              </button>
            </div>
          </div>
        </>
      );
    }

    return (
      <>
        
        <Sidebar />
        <div style={{ fontFamily: 'Helvetica, Arial, sans-serif', background: `linear-gradient(135deg, ${colors.deepPurple} 0%, ${colors.purple} 25%, ${colors.darkTeal} 50%, ${colors.teal} 75%, ${colors.grayBlue} 100%)` }} className="ml-64 min-h-screen p-8">
          <div className="max-w-2xl mx-auto pt-8">
            <div className="flex justify-between items-center mb-6">
              <button
                onClick={() => {
                  setStudyCategoryFilter('all');
                  setCurrentCardIndex(0);
                  setIsFlipped(false);
                  setView('my-deck');
                }}
                style={{ boxShadow: '0 2px 4px rgba(0, 0, 0, 0.15)' }}
                className="px-4 py-2 bg-white text-gray-700 rounded-xl hover:opacity-90"
              >
                ‚Üê Back to Deck
              </button>
              <div style={{ color: colors.lightGray }} className="font-medium">
                Card {currentCardIndex + 1} of {categoryFiltered.length}
              </div>
            </div>

            {/* Category Filter */}
            <div className="mb-6">
              <div style={{ color: colors.lightGray }} className="text-sm mb-2 font-medium">Study Category:</div>
              <div className="flex gap-2 flex-wrap">
                {categories.map(category => (
                  <button
                    key={category}
                    onClick={() => {
                      setStudyCategoryFilter(category);
                      setCurrentCardIndex(0);
                      setIsFlipped(false);
                    }}
                    style={{
                      backgroundColor: studyCategoryFilter === category ? colors.aurora : 'white',
                      color: studyCategoryFilter === category ? colors.deepPurple : colors.grayBlue,
                      boxShadow: '0 2px 4px rgba(0, 0, 0, 0.15)'
                    }}
                    className="px-4 py-2 rounded-xl text-sm font-medium hover:opacity-90 capitalize"
                  >
                    {category}
                  </button>
                ))}
              </div>
            </div>

            {/* Flashcard */}
            <div
              className="card-flip-container h-96 cursor-pointer mb-6"
              onClick={() => setIsFlipped(!isFlipped)}
            >
              <div className={`card-flip-inner ${isFlipped ? 'flipped' : ''}`}>
                {/* Front - Spanish word */}
                <div className="card-face">
                  <div className="bg-white rounded-3xl shadow-2xl p-8 h-full flex flex-col items-center justify-center">
                    <div style={{ color: colors.grayBlue }} className="text-xs uppercase tracking-wider mb-6 font-medium">Spanish</div>
                    <div style={{ color: colors.deepPurple }} className="text-6xl font-bold mb-8 text-center">{currentCard.spanish}</div>
                    
                    <button 
                      onClick={(e) => pronounceWord(currentCard.spanish, e)}
                      style={{ backgroundColor: colors.paleGray }}
                      className="w-16 h-16 rounded-full flex items-center justify-center mb-4 hover:opacity-80 transition-opacity cursor-pointer"
                      title="Click to hear pronunciation"
                    >
                      <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke={colors.teal} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                        <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                        <path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>
                        <path d="M19.07 4.93a10 10 0 0 1 0 14.14"></path>
                      </svg>
                    </button>
                    
                    <div style={{ color: colors.grayBlue }} className="text-sm mt-4">Click to flip</div>
                  </div>
                </div>

                {/* Back - English translation with conjugations */}
                <div className="card-face card-face-back">
                  <div className="bg-white rounded-3xl shadow-2xl p-8 h-full overflow-y-auto">
                    <div className="space-y-6">
                      {/* Translation section */}
                      <div>
                        <div className="flex items-center justify-between mb-4">
                          <div style={{ color: colors.teal }} className="text-xs uppercase tracking-wider font-medium">Translation</div>
                          {currentCard.partOfSpeech && (
                            <span style={{ backgroundColor: colors.paleGray, color: colors.deepPurple }} className="px-3 py-1 rounded-full text-xs font-medium uppercase">
                              {currentCard.partOfSpeech}
                            </span>
                          )}
                        </div>
                        <div style={{ color: colors.deepPurple }} className="text-4xl font-bold mb-2">{currentCard.english}</div>
                        {currentCard.gender !== 'n/a' && (
                          <div style={{ color: colors.grayBlue }} className="text-sm">({currentCard.gender})</div>
                        )}
                      </div>

                      {/* Conjugations table for verbs */}
                      {currentCard.conjugations && currentCard.conjugations.present?.yo && (
                        <div className="mt-6 pt-6" style={{ borderTop: `1px solid ${colors.lightGray}` }}>
                          <div style={{ color: colors.deepPurple }} className="text-lg font-semibold mb-3">Conjugations</div>
                          <div className="overflow-x-auto">
                            <table className="w-full border-collapse text-sm">
                              <thead>
                                <tr style={{ backgroundColor: colors.paleGray }}>
                                  <th style={{ color: colors.deepPurple, borderColor: colors.lightGray }} className="px-3 py-2 text-left font-semibold border">Person</th>
                                  <th style={{ color: colors.deepPurple, borderColor: colors.lightGray }} className="px-3 py-2 text-left font-semibold border">Preterite</th>
                                  <th style={{ color: colors.deepPurple, borderColor: colors.lightGray }} className="px-3 py-2 text-left font-semibold border">Present</th>
                                  <th style={{ color: colors.deepPurple, borderColor: colors.lightGray }} className="px-3 py-2 text-left font-semibold border">Imperfect</th>
                                  <th style={{ color: colors.deepPurple, borderColor: colors.lightGray }} className="px-3 py-2 text-left font-semibold border">Future</th>
                                </tr>
                              </thead>
                              <tbody>
                                {['yo', 'tu', 'el', 'nosotros', 'vosotros', 'ellos'].map((person, idx) => (
                                  <tr key={person} style={{ backgroundColor: idx % 2 === 0 ? 'white' : `${colors.paleGray}50` }}>
                                    <td style={{ color: colors.grayBlue, borderColor: colors.lightGray }} className="px-3 py-2 border font-medium capitalize">
                                      {person === 'el' ? '√âl/Ella/Usted' : person === 'ellos' ? 'Ellos/Ellas/Ustedes' : person === 'tu' ? 'T√∫' : person.charAt(0).toUpperCase() + person.slice(1)}
                                    </td>
                                    <td style={{ color: colors.grayBlue, borderColor: colors.lightGray }} className="px-3 py-2 border">{currentCard.conjugations.preterite?.[person] || '-'}</td>
                                    <td style={{ color: colors.grayBlue, borderColor: colors.lightGray }} className="px-3 py-2 border">{currentCard.conjugations.present?.[person] || '-'}</td>
                                    <td style={{ color: colors.grayBlue, borderColor: colors.lightGray }} className="px-3 py-2 border">{currentCard.conjugations.imperfect?.[person] || '-'}</td>
                                    <td style={{ color: colors.grayBlue, borderColor: colors.lightGray }} className="px-3 py-2 border">{currentCard.conjugations.future?.[person] || '-'}</td>
                                  </tr>
                                ))}
                              </tbody>
                            </table>
                          </div>
                        </div>
                      )}

                      {/* Example section */}
                      {currentCard.exampleSpanish && (
                        <div className="mt-6 pt-6" style={{ borderTop: `1px solid ${colors.lightGray}` }}>
                          <div style={{ color: colors.teal }} className="text-xs uppercase tracking-wider font-medium mb-3">Example</div>
                          <div style={{ color: colors.deepPurple }} className="text-lg italic mb-2">"{currentCard.exampleSpanish}"</div>
                          <div style={{ color: colors.grayBlue }} className="text-sm">{currentCard.exampleEnglish}</div>
                        </div>
                      )}
                    </div>
                  </div>
                </div>
              </div>
            </div>

            {/* Navigation */}
            <div className="flex gap-3 justify-center">
              <button
                onClick={() => {
                  if (currentCardIndex > 0) {
                    setCurrentCardIndex(currentCardIndex - 1);
                    setIsFlipped(false);
                    setShowTranslation(false);
                  }
                }}
                disabled={currentCardIndex === 0}
                style={{ boxShadow: '0 2px 4px rgba(0, 0, 0, 0.15)' }}
                className="px-6 py-3 bg-white text-gray-700 rounded-xl hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed font-medium"
              >
                Previous
              </button>
              <button
                onClick={() => updateCardStatus(currentCard.id, currentCard.status === 'mastered' ? 'learning' : 'mastered')}
                style={{ 
                  backgroundColor: currentCard.status === 'mastered' ? colors.purple : colors.aurora,
                  color: currentCard.status === 'mastered' ? 'white' : colors.deepPurple,
                  boxShadow: '0 2px 4px rgba(0, 0, 0, 0.15)'
                }}
                className="px-6 py-3 rounded-xl font-medium hover:opacity-90"
              >
                {currentCard.status === 'mastered' ? 'Mark Learning' : 'Mark Mastered'}
              </button>
              <button
                onClick={() => {
                  if (currentCardIndex < categoryFiltered.length - 1) {
                    setCurrentCardIndex(currentCardIndex + 1);
                    setIsFlipped(false);
                    setShowTranslation(false);
                  }
                }}
                disabled={currentCardIndex === categoryFiltered.length - 1}
                style={{ boxShadow: '0 2px 4px rgba(0, 0, 0, 0.15)' }}
                className="px-6 py-3 bg-white text-gray-700 rounded-xl hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed font-medium"
              >
                Next
              </button>
            </div>
          </div>
        </div>
      </>
    );
  }

  // Quiz Session (active quiz)
  if (view === 'quiz-session') {
    const filtered = getFilteredCards();
    const currentCard = filtered[currentCardIndex];

    if (!currentCard) {
      return (
        <>
          
          <Sidebar />
          <div style={{ fontFamily: 'Helvetica, Arial, sans-serif', backgroundColor: colors.paleGray }} className="ml-64 min-h-screen p-8 flex items-center justify-center">
            <div className="text-center">
              <p style={{ color: colors.grayBlue }} className="mb-4">No cards for quiz!</p>
              <button
                onClick={() => setView('quiz-mode')}
                style={{ backgroundColor: colors.teal }}
                className="px-6 py-3 text-white rounded-xl hover:opacity-90"
              >
                Back to Quiz Mode
              </button>
            </div>
          </div>
        </>
      );
    }

    return (
      <>
        
        <Sidebar />
        <div style={{ fontFamily: 'Helvetica, Arial, sans-serif', background: `linear-gradient(135deg, ${colors.deepPurple} 0%, ${colors.purple} 25%, ${colors.darkTeal} 50%, ${colors.teal} 75%, ${colors.grayBlue} 100%)` }} className="ml-64 min-h-screen p-8">
          <div className="max-w-2xl mx-auto pt-8">
            <div className="flex justify-between items-center mb-6">
              <button
                onClick={() => setView('quiz-mode')}
                style={{ boxShadow: '0 2px 4px rgba(0, 0, 0, 0.15)' }}
                className="px-4 py-2 bg-white text-gray-700 rounded-xl hover:opacity-90"
              >
                ‚Üê Exit Quiz
              </button>
              <div style={{ color: colors.lightGray }} className="font-medium">
                Question {currentCardIndex + 1} of {filtered.length}
              </div>
            </div>

            <div className="bg-white rounded-3xl shadow-2xl p-8 mb-6">
              <div className="text-center mb-8">
                <div className="flex items-center justify-center gap-4 mb-4">
                  <div style={{ color: colors.teal }} className="text-5xl font-bold">{currentCard.spanish}</div>
                  <button 
                    onClick={(e) => pronounceWord(currentCard.spanish, e)}
                    style={{ backgroundColor: colors.paleGray }}
                    className="w-12 h-12 rounded-full flex items-center justify-center hover:opacity-80 transition-opacity cursor-pointer flex-shrink-0"
                    title="Click to hear pronunciation"
                  >
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke={colors.teal} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                      <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                      <path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>
                    </svg>
                  </button>
                </div>
                <div style={{ color: colors.grayBlue }}>What does this mean in English?</div>
              </div>

              {/* Example sentence */}
              {currentCard.exampleSpanish && (
                <div style={{ backgroundColor: colors.paleGray, borderLeftColor: colors.aurora }} className="mb-6 p-4 rounded-lg border-l-4">
                  <div style={{ color: colors.grayBlue }} className="text-sm font-medium mb-1">Example</div>
                  <div style={{ color: colors.deepPurple }} className="italic mb-2">{currentCard.exampleSpanish}</div>
                  {showTranslation && (
                    <div style={{ color: colors.grayBlue }} className="text-sm">{currentCard.exampleEnglish}</div>
                  )}
                  <button
                    onClick={() => setShowTranslation(!showTranslation)}
                    style={{ color: colors.teal, boxShadow: '0 1px 2px rgba(0, 0, 0, 0.1)' }}
                    className="text-sm hover:opacity-80 mt-2"
                  >
                    {showTranslation ? 'Hide' : 'Show'} translation
                  </button>
                </div>
              )}

              {quizMode === 'type' ? (
                <div>
                  <input
                    type="text"
                    value={quizAnswer}
                    onChange={(e) => setQuizAnswer(e.target.value)}
                    onKeyPress={(e) => e.key === 'Enter' && checkAnswer()}
                    placeholder="Type your answer..."
                    style={{ borderColor: colors.lightGray }}
                    className="w-full px-4 py-3 border-2 rounded-xl focus:outline-none mb-4 text-lg"
                    onFocus={(e) => e.target.style.borderColor = colors.teal}
                    onBlur={(e) => e.target.style.borderColor = colors.lightGray}
                    disabled={quizFeedback !== null}
                  />
                  <button
                    onClick={checkAnswer}
                    disabled={!quizAnswer.trim() || quizFeedback !== null}
                    style={{ backgroundColor: colors.aurora, color: colors.deepPurple, boxShadow: '0 2px 4px rgba(0, 0, 0, 0.15)' }}
                    className="w-full px-6 py-3 rounded-xl hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed font-medium text-lg"
                  >
                    Submit Answer
                  </button>
                </div>
              ) : (
                <div className="space-y-3">
                  {quizOptions.map((option, idx) => (
                    <button
                      key={idx}
                      onClick={() => {
                        setQuizAnswer(option);
                        setTimeout(() => checkAnswer(), 100);
                      }}
                      disabled={quizFeedback !== null}
                      style={{
                        backgroundColor: quizAnswer === option ? colors.teal : colors.paleGray,
                        color: quizAnswer === option ? 'white' : colors.grayBlue,
                        boxShadow: '0 2px 4px rgba(0, 0, 0, 0.15)'
                      }}
                      className="w-full px-6 py-4 rounded-xl font-medium text-lg text-left transition-colors hover:opacity-90 disabled:cursor-not-allowed"
                    >
                      {option}
                    </button>
                  ))}
                </div>
              )}

              {quizFeedback && (
                <div style={{
                  backgroundColor: quizFeedback === 'correct' ? `${colors.aurora}30` : '#fee2e2',
                  color: quizFeedback === 'correct' ? colors.darkTeal : '#991b1b',
                  borderColor: quizFeedback === 'correct' ? colors.aurora : '#f87171'
                }} className="mt-6 p-4 rounded-xl text-center font-medium text-lg border-2">
                  {quizFeedback === 'correct' ? (
                    <div className="flex items-center justify-center gap-2">
                      <Check className="w-6 h-6" />
                      Correct! üéâ
                    </div>
                  ) : (
                    <div>
                      <div className="flex items-center justify-center gap-2 mb-2">
                        <X className="w-6 h-6" />
                        Incorrect
                      </div>
                      <div className="text-sm">The correct answer is: {currentCard.english}</div>
                    </div>
                  )}
                </div>
              )}
            </div>
          </div>
        </div>
      </>
    );
  }

  return null;
};



    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<CataCards />);
  </script>
</body>
</html>
